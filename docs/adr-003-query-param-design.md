# ADR 3 — クエリパラメータ設計（status フィルタ）

- **ステータス**: 採用
- **コンテキスト**: Todo 一覧取得 API で、ステータス（notStarted / inProgress / completed）による絞り込みを行いたい。複数ステータスを同時に指定したいケースがあり、また将来的に「除外」という逆条件の指定も必要になる可能性がある。クエリパラメータの設計として複数の候補を検討した。
- **決定**: ステータス指定は `status` パラメータにカンマ区切りで渡す形式（例: `?status=notStarted,inProgress`）を採用した。除外条件は別パラメータ `exclude_status` として分離する方針とした。
- **却下した案**:
  - `status=notStarted&status=inProgress` のように同名パラメータを `&` で繰り返す方式 → カンマ区切りの方が URL が短くなり、コピー＆ペーストや手入力がしやすく利便性が高いため却下。
  - `?notStarted&inProgress` のようにステータス名をそのままパラメータ名にする方式 → ステータス名の変更や追加があった場合にクエリパラメータ自体を増やす必要があり、拡張性に難があるため却下。
- **結果**: `TodoController.Get` は `status` 文字列をカンマで分割して `List<Status>` に変換するヘルパー `ToEnumList` を使い、フィルタ条件として Usecase に渡す。ステータスの種類が増減しても API のインターフェースは変わらず、クライアントは値を増やすだけで対応できる。


